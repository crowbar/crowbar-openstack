[DEFAULT]
state_path = /var/lib/magnum
debug = <%= node[:magnum][:debug] %>
verbose = <%= node[:magnum][:verbose] %>
log_dir = /var/log/magnum
use_syslog = <%= node[:magnum][:use_syslog] ? "True" : "False" %>
use_stderr = false
rpc_conn_pool_size = 64
executor_thread_pool_size = 256
transport_url = <%= @rabbit_settings[:url] %>
control_exchange = magnum

[api]
port = <%= @bind_port %>
host = <%= @bind_host %>

[barbican_client]
region_name = <%= @keystone_settings['endpoint_region'] %>

[certificates]
cert_manager_type = <%= "#{node[:magnum][:cert][:cert_manager_type]}" %>

[cinder_client]
region_name = <%= @keystone_settings['endpoint_region'] %>

[database]
connection = <%= @sql_connection %>

[glance_client]
region_name = <%= @keystone_settings['endpoint_region'] %>

[heat_client]
region_name = <%= @keystone_settings['endpoint_region'] %>

[keystone_auth]
auth_url = <%= @keystone_settings['public_auth_url'] %>
project_name = <%= @keystone_settings['service_tenant'] %>
username = <%= @keystone_settings['service_user'] %>
password = <%= @keystone_settings['service_password'] %>
insecure = <%= @keystone_settings['insecure'] %>

[keystone_authtoken]
auth_uri = <%= @keystone_settings['public_auth_url'] %>
auth_version = <%= @keystone_settings['api_version_for_middleware'] %>
insecure = <%= @keystone_settings['insecure'] %>
region_name = <%= @keystone_settings['endpoint_region'] %>
signing_dir = /var/cache/magnum/keystone-signing
identity_uri = <%= @keystone_settings['admin_auth_url'] %>
admin_user = <%= @keystone_settings['service_user'] %>
admin_password = <%= @keystone_settings['service_password'] %>
admin_tenant_name = <%= @keystone_settings['service_tenant'] %>

[magnum_client]
region_name = <%= @keystone_settings['endpoint_region'] %>

[neutron_client]
region_name = <%= @keystone_settings['endpoint_region'] %>

[nova_client]
region_name = <%= @keystone_settings['endpoint_region'] %>

[oslo_concurrency]
lock_path = /var/run/magnum

[oslo_messaging_notifications]
driver = messaging

[oslo_policy]
policy_file = /etc/magnum/policy.json

[trust]
trustee_domain_id = <%= @trustee["domain_id"] %>
trustee_domain_admin_id = <%= @trustee["domain_admin_id"] %>
trustee_domain_admin_password = <%= @trustee["domain_admin_password"] %>
insecure = <%= @keystone_settings['insecure'] %>
